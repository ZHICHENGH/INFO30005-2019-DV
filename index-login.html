<!DOCTYPE html>
<html lang="en">

<html style= "height:100%" class="no-js" lang=""> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Digital Vibe</title>
    <meta name="description" content="Digital Vibe">
    <meta name="viewport" content="width=device-width, initial-scale=1">

	<link rel="apple-touch-icon" href="/images/logo.png">
    <link rel="shortcut icon" href="/images/logo.png">


    <link href="https://fonts.googleapis.com/css?family=Courgette&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="assets/css/jquery.popuplayer.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.0/normalize.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lykmapipo/themify-icons@0.1.2/css/themify-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pixeden-stroke-7-icon@1.2.3/pe-icon-7-stroke/dist/pe-icon-7-stroke.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.0/css/flag-icon.min.css">
    <link rel="stylesheet" href="assets/css/cs-skin-elastic.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/chartist@0.11.0/dist/chartist.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/jqvmap@1.5.1/dist/jqvmap.min.css" rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/weathericons@2.1.0/css/weather-icons.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@3.9.0/dist/fullcalendar.min.css" rel="stylesheet" />
    <!-- <script type="text/javascript" src="https://cdn.jsdelivr.net/html5shiv/3.7.3/html5shiv.min.js"></script> -->
    <!--[if IE]>
    <script src="http://libs.useso.com/js/html5shiv/3.7/html5shiv.min.js"></script>
    <![endif]-->

   <style>
    #weatherWidget .currentDesc {
        color: #ffffff!important;
    }
        .traffic-chart {
            min-height: 335px;
        }
	   .search-btn ,.toggle-btn{
			background-color: #FDC600;
			color: #333;
			font-size: 16px;
			border: 1px solid #EAE9E9;
			width: 40px;
			height: 40px;
			color: #FFF;
			transition: all 0.3s ease 0s; 
			padding: 0px;
		}
	    #map {
			height: 100%;
		  }
		body {
		  height: 100%;
		}
    </style>
</head>

<body>
        <script src="http://libs.useso.com/js/jquery/2.1.1/jquery.min.js" type="text/javascript"></script>
        <script>window.jQuery || document.write('<script src="assets/js/jquery-2.1.1.min.js"><\/script>')</script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
        <script src="assets/js/jquery.popuplayer.js"></script>
        <script type="text/javascript">
                $(function() {
                // from right to left
                $('#test2').PopupLayer({
                    content:'<title style="margin-top: 80px" id="commentform" class="text-center">My Comments</title><div id="commentcontent"></div>',
                    to: 'left',
                    blur:true
                });
            });
        </script>
    <!-- Left Panel -->
    <aside id="left-panel" class="left-panel shadow-lg">
        <nav class="navbar navbar-expand-sm navbar-default">
            <div id="main-menu" class="main-menu collapse navbar-collapse">
                <ul class="nav navbar-nav">

                    <div style="padding-top: 25px; padding-left: 12px; height: 650px" data-wow-delay="0.8s">

                        <form action="" class=" form-inline">
                            <div class="form-group" >
                                <input type="text" style="width: 335px;" id="pac-input" class="form-control" placeholder="Place name or address">
                                <button class="btn search-btn" type="submit"><i class="fa fa-search"></i></button>
                            </div>
                            <p style="padding: 10px" >Toilet <input type="checkbox" id="Acc_Toilet_Check" onclick="initMap()">
                                Carpark <input type="checkbox" id="Acc_Carpark_Check" onclick="initMap()">
                                Lift <input type="checkbox" id="Acc_Lift_Check" onclick="initMap()"> </p>
                        </form>
                        <div class="menu-title" id="PlaceDetails">Address:</div>
                    </div>

                </ul>
            </div><!-- /.navbar-collapse -->

            <img style="opacity: 0.4" src="images/disability.jpg"  alt="dissability"/>
        </nav>
    </aside>
<!-- /#left-panel -->
<!-- Right Panel -->
<div style="height: 94%" id="right-panel" class="right-panel">
    <!-- Header-->

  <header id="header" class="header shadow">
            <div class="top-left">
                <div class="navbar-header">
                    <a class="navbar-brand" href="./"><img src="images/logo3.png" alt="Logo" ></a>
                </div>
            </div>
            <div class="top-right">
                <div class="header-menu">

					<a href="#"><div style="padding: 18px"  class="header-left">
						<h5>About Us</h5>
					</div></a>
					<a href="#"><div style="padding: 18px"  class="header-left">
						<h5></h5>
                    </div></a>
                    <div style="padding: 10px"  class="header-left">
						<h4 id="username"></h4>
					</div>
                    <div class="user-area dropdown float-right">
                        <a href="#" class="dropdown-toggle active" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <img class="user-avatar rounded-circle" src="images/admin.png" alt="User Avatar">
                        </a>

                        <div class="user-menu dropdown-menu">
                            <a class="nav-link" href="#"><i class="fa fa- user"></i>My Profile</a>

                            <a class="nav-link" id="test2" href="#" onclick="show_comments()"><i class="fa fa- user"></i>My comments</a>

                            <a class="nav-link" href="#"><i class="fa fa -cog"></i>Settings</a>

                            <a class="nav-link" href="https://joyaccess.herokuapp.com/logout"><i class="fa fa-power -off"></i>Logout</a>
                        </div>
                    </div>

                </div>

            </div>

  </header>
	
<div style="height: 100%" id="map"></div>
</div>
        <script language="javascript">
            function GetRequest() {
                var url = location.search; //获取url中"?"符后的字串
                var theRequest = new Object();
                if (url.indexOf("?") != -1) {
                    var str = url.substr(1);
                    strs = str.split("&");
                    for(var i = 0; i < strs.length; i ++) {
                        theRequest[strs[i].split("=")[0]]=unescape(strs[i].split("=")[1]);
                    }
                }
                return theRequest;
            }
        </script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@2.2.4/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.4/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-match-height@0.7.2/dist/jquery.matchHeight.min.js"></script>
    <script src="assets/js/main.js"></script>

    <!--  Chart js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.7.3/dist/Chart.bundle.min.js"></script>

    <!--Chartist Chart-->
    <script src="https://cdn.jsdelivr.net/npm/chartist@0.11.0/dist/chartist.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartist-plugin-legend@0.6.2/chartist-plugin-legend.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/jquery.flot@0.8.3/jquery.flot.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flot-pie@1.0.0/src/jquery.flot.pie.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flot-spline@0.0.1/js/jquery.flot.spline.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/simpleweather@3.1.0/jquery.simpleWeather.min.js"></script>
    <script src="assets/js/init/weather-init.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@3.9.0/dist/fullcalendar.min.js"></script>
    <script src="assets/js/init/fullcalendar-init.js"></script>

    <!--Local Stuff-->
    <script>
        jQuery(document).ready(function($) {
            "use strict";
            var usernameTag = document.querySelector("#username");
            var queryString = GetRequest();
            usernameTag.innerText = queryString.username;
        });
    </script>


<script>
    function show_comments(){
        var username=GetRequest().username;
        //var screen = document.getElementById('dropback');
        var commentform=document.getElementById('commentform');
        var commentcontent=document.getElementById('commentcontent');
        //var top = (document.documentElement.clientHeight - 250) / 2 - 150;
        //var left = (document.documentElement.clientWidth - 300) / 2;
        //commentform.style.left = left + 'px';
        //commentform.style.top = top + 'px';
        //screen.style.display = 'block';
        //commentform.style.display='block';
        var nullstring=document.createElement('div');
        nullstring.textContent="\n";
        if(username!=false){
        var j=0;
        $.getJSON('https://joyaccess.herokuapp.com/comment/commentAPI', function commentbyuserid(result) {
            $.each(result, function(i, field){
                if(field.user_name==username){
                    var commentid=document.createElement('div');
                    commentid.className='comment_time';
                    var contenttext=document.createElement('div');
                    contenttext.className='comment_text';
                    var commenttime=document.createElement('div');
                    commenttime.className='comment_time';
                    var commentplaceid=document.createElement('div');
                    commentplaceid.className='comment_time';
                    var text=document.createElement('div');
                    text.className='comment_time';      
                    text.textContent="Comment content: ";
                    j++;
                    commentid.textContent="Comment No: "+field.comment_id;
                    commentcontent.appendChild(commentid);
                    commenttime.textContent="Comment time: "+field.timestamp;
                    commentcontent.appendChild(commenttime);
                    commentplaceid.textContent="Place ID: "+field.place_id;
                    commentcontent.appendChild(commentplaceid);
                    commentcontent.appendChild(text);
                    contenttext.textContent=field.text;
                    commentcontent.appendChild(contenttext);
                    commentcontent.appendChild(nullstring);
                    commentcontent.appendChild(nullstring);
                    commentcontent.appendChild(nullstring);
                }
            });   
        });
        }
        else{
         alert("fail");   
        }
    }
   function closecommentform()
   {
    var screen = document.getElementById('dropback');
    var commentform=document.getElementById('commentform');
    var commentcontent=document.getElementById('commentcontent');
    screen.style.display = 'none';
    commentform.style.display='none';
    commentcontent.innerHTML="";
   }
  </script>
    
    <script>
        var markers = [];
        var markers2 = [];
        function initMap() {
            var bounds = new google.maps.LatLngBounds();
            var map = new google.maps.Map(document.getElementById('map'), {
                center: new google.maps.LatLng(-37.7963689, 144.9589798),
                zoom: 16
            });
            document.getElementById("PlaceDetails").innerHTML = "";
            document.getElementById("pac-input").value = "";
            var toiletSaveData = false;
            var carparkSaveData = false;
            var liftSaveData = false;
            // allows clicking on anywhere on map to get position info, used only in beginning for POC
            /*
            map.addListener('click', function(e) {
                var exist = false;
                var latLng2 = e.latLng;
                if (exist == false) {
                    placeMarkerAndPanTo(e.latLng, map);
                }
            });
            */
            function placeMarkerAndPanTo(latLng, map) {
                deleteMarkers();
                var marker = new google.maps.Marker({
                    position: latLng,
                    map: map
                });
                map.panTo(latLng);
                var infoWindow = new google.maps.InfoWindow({
                    content: 'Latitude: ' + latLng.lat() + '<br />Longitude: ' + latLng.lng()
                });
                infoWindow.open(map, marker);
                markers.push(marker);
            }
            function deleteMarkers() {
                // Clear out the old markers.
                markers.forEach(function(marker) {
                    marker.setMap(null);
                });
                markers = [];
            }
            function uncheckFilters() {
                document.getElementById("Acc_Toilet_Check").checked = false;
                document.getElementById("Acc_Carpark_Check").checked = false;
                document.getElementById("Acc_Lift_Check").checked = false;
            }
            function saveAccData() {
            }
            function restoreAccData() {
                if (toiletSaveData == true) {
                    document.getElementById("acc_toilet_input").checked = true;
                }
                if (carparkSaveData == true) {
                    document.getElementById("acc_carpark_input").checked = true;
                }
                if (liftSaveData == true) {
                    document.getElementById("acc_lift_input").checked = true;
                }
            }
            deleteMarkers();
            $.getJSON('https://joyaccess.herokuapp.com/places/placeAPI', function(jsonData) {
                $.each(jsonData, function(key,data) {
                    var place_name = data.place_name;
                    var address = data.address;
                    var acc_toilet = data.acc_toilet;
                    var acc_carpark = data.acc_carpark;
                    var acc_lift = data.acc_lift;
                    var place_id = data.place_id;
                    var point = new google.maps.LatLng(
                        parseFloat(data.lat),
                        parseFloat(data.lng));
                    console.log("place_name = " + place_name + "\nplace_id = " + place_id +
                        "\naddress = " + address + "\nacc_toilet = " + acc_toilet +
                        "\nacc_carpark = " + acc_carpark + "\nacc_lift = " + acc_lift + "\npoint = " + point +
                        "\nToilet Check = " + document.getElementById("Acc_Toilet_Check").checked + "\nCarpark Check = " +
                        document.getElementById("Acc_Carpark_Check").checked +
                        "\nLift Check = " + document.getElementById("Acc_Lift_Check").checked);
                    // create markers based on radio button filters
                    if ((document.getElementById("Acc_Toilet_Check").checked == true && acc_toilet == true) ||
                        (document.getElementById("Acc_Carpark_Check").checked == true && acc_carpark == true) ||
                        (document.getElementById("Acc_Lift_Check").checked == true && acc_lift == true)) {
                        console.log("Found place with accessibility!");
                        var infowincontent = document.createElement('div');
                        var strong = document.createElement('strong');
                        strong.textContent = place_name;
                        infowincontent.appendChild(strong);
                        infowincontent.appendChild(document.createElement('br'));
                        var text = document.createElement('text');
                        text.textContent = address;
                        infowincontent.appendChild(text);
                        if (acc_toilet == true){
                            var acctext_toilet = document.createElement('text');
                            infowincontent.appendChild(document.createElement('br'));
                            acctext_toilet.textContent = "Accessible Toilet";
                            infowincontent.appendChild(acctext_toilet);
                        }
                        if (acc_carpark == true){
                            var acctext_carpark = document.createElement('text');
                            infowincontent.appendChild(document.createElement('br'));
                            acctext_carpark.textContent = "Accessible Carpark";
                            infowincontent.appendChild(acctext_carpark);
                        }
                        if (acc_lift == true){
                            var acctext_lift = document.createElement('text');
                            infowincontent.appendChild(document.createElement('br'));
                            acctext_lift.textContent = "Accessible Lift";
                            infowincontent.appendChild(acctext_lift);
                        }
                        //var icon = customLabel[type] || {};
                        var marker = new google.maps.Marker({
                            title: place_name,
                            address: address,
                            map: map,
                            position: point,
                            id: place_id,
                            //label: icon.label
                        });
                        // When clicked on marker, generate pop-up text and HTML code in "PlaceDetails" div
                        marker.addListener('click', function () {
                            document.getElementById("PlaceDetails").innerHTML = "";
                            toiletSaveData = false;
                            carparkSaveData = false;
                            liftSaveData = false;
                            //document.body.style = "white-space: pre;";
                            var para = document.createElement("p");
                            var node1 = document.createTextNode("Name: " + marker.title);
                            para.appendChild(node1);
                            para.appendChild(document.createElement('br'));
                            var node2 = document.createTextNode("Address: " + marker.address);
                            para.appendChild(node2);
                            para.appendChild(document.createElement('br'));
                            var node3 = document.createTextNode("Position: " + marker.position);
                            para.appendChild(node3);
                            para.appendChild(document.createElement('br'));
                            var node4 = document.createTextNode("Place ID: " + marker.id);
                            para.appendChild(node4);
                            para.appendChild(document.createElement('br'));
                            para.appendChild(document.createTextNode(' Toilet '));
                            var acc_toilet_input = document.createElement('input');
                            acc_toilet_input.type = 'checkbox';
                            acc_toilet_input.id = 'acc_toilet_input';
                            acc_toilet_input.value = "value";
                            para.appendChild(acc_toilet_input);
                            para.appendChild(document.createTextNode(' Carpark '));
                            var acc_carpark_input = document.createElement('input');
                            acc_carpark_input.type = 'checkbox';
                            acc_carpark_input.id = 'acc_carpark_input';
                            acc_carpark_input.value = "value";
                            para.appendChild(acc_carpark_input);
                            para.appendChild(document.createTextNode(' Lift '));
                            var acc_lift_input = document.createElement('input');
                            acc_lift_input.type = 'checkbox';
                            acc_lift_input.id = 'acc_lift_input';
                            acc_lift_input.value = "value";
                            para.appendChild(acc_lift_input);
                            var element = document.getElementById("PlaceDetails");
                            element.appendChild(para);
                            if (acc_toilet == true) {
                                document.getElementById("acc_toilet_input").checked = true;
                                toiletSaveData = true;
                            }
                            if (acc_carpark == true) {
                                document.getElementById("acc_carpark_input").checked = true;
                                carparkSaveData = true;
                            }
                            if (acc_lift == true) {
                                document.getElementById("acc_lift_input").checked = true;
                                liftSaveData = false;
                            }
                            para.appendChild(document.createElement('br'));
                            var applyBtn = document.createElement('input');
                            applyBtn.type = "button";
                            applyBtn.value = "Apply";
                            applyBtn.onclick = saveAccData();
                            para.appendChild(applyBtn);
                            var cancelBtn = document.createElement('input');
                            cancelBtn.type = "button";
                            cancelBtn.value = "Cancel";
                            cancelBtn.onclick = restoreAccData();
                            para.appendChild(cancelBtn);
                            var infoWindow = new google.maps.InfoWindow({
                                content: infowincontent
                            });
                            //infoWindow.setContent(infowincontent);
                            infoWindow.open(map, marker);
                        });
                        //extend the bounds to include each marker's position
                        bounds.extend(marker.position);
                        //now fit the map to the newly inclusive bounds
                        map.fitBounds(bounds);
                        map.setZoom(16);
                        markers.push(marker);
                    }
                });
            });
            // Create the search box and link it to the UI element.
            var input = document.getElementById('pac-input');
            var searchBox = new google.maps.places.SearchBox(input);
            //map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);
            // Bias the SearchBox results towards current map's viewport.
            map.addListener('bounds_changed', function() {
                searchBox.setBounds(map.getBounds());
            });
            // Listen for the event fired when the user selects a prediction and retrieve
            // more details for that place.
            searchBox.addListener('places_changed', function() {
                var places = searchBox.getPlaces();
                if (places.length == 0) {
                    return;
                }
                // Clear out the old markers.
                markers2.forEach(function(marker2) {
                    marker2.setMap(null);
                });
                markers2 = [];
                deleteMarkers();
                uncheckFilters();
                // For each place, get the icon, name and location.
                var bounds = new google.maps.LatLngBounds();
                places.forEach(function(place) {
                    if (!place.geometry) {
                        console.log("Returned place contains no geometry");
                        return;
                    }
                    var icon = {
                        url: place.icon,
                        size: new google.maps.Size(71, 71),
                        origin: new google.maps.Point(0, 0),
                        anchor: new google.maps.Point(17, 34),
                        scaledSize: new google.maps.Size(20, 20)
                    };
                    // Create a marker for each place.
                    var marker2 = new google.maps.Marker({
                        map: map,
                        icon: icon,
                        title: place.name,
                        position: place.geometry.location,
                        address:place.formatted_address,
                        id: place.place_id
                    });
                    var infoWindow2 = new google.maps.InfoWindow();
                    // When clicked on marker, generate pop-up text and HTML code in "PlaceDetails" div
                    google.maps.event.addListener(marker2,'click',(function(marker2, map) {
                        return function () {
                            document.getElementById("PlaceDetails").innerHTML = "";
                            var infowincontent = document.createElement('div');
                            //document.body.style = "white-space: pre;";
                            var para = document.createElement("p");
                            var node1 = document.createTextNode("Name: " + marker2.title + "\n");
                            para.appendChild(node1);
                            para.appendChild(document.createElement('br'));
                            var node2 = document.createTextNode("Address: " + marker2.address +  "\n");
                            para.appendChild(node2);
                            para.appendChild(document.createElement('br'));
                            var node3 = document.createTextNode("Position: " + marker2.position + "\n");
                            para.appendChild(node3);
                            para.appendChild(document.createElement('br'));
                            var node4 = document.createTextNode("Place ID: " + marker2.id + "\n");
                            para.appendChild(node4);
                            para.appendChild(document.createElement('br'));
                            para.appendChild(document.createTextNode(' Toilet '));
                            var acc_toilet_input = document.createElement('input');
                            acc_toilet_input.type = 'checkbox';
                            acc_toilet_input.id = 'acc_toilet_input';
                            acc_toilet_input.value = "value";
                            para.appendChild(acc_toilet_input);
                            para.appendChild(document.createTextNode(' Carpark '));
                            var acc_carpark_input = document.createElement('input');
                            acc_carpark_input.type = 'checkbox';
                            acc_carpark_input.id = 'acc_carpark_input';
                            acc_carpark_input.value = "value";
                            para.appendChild(acc_carpark_input);
                            para.appendChild(document.createTextNode(' Lift '));
                            var acc_lift_input = document.createElement('input');
                            acc_lift_input.type = 'checkbox';
                            acc_lift_input.id = 'acc_lift_input';
                            acc_lift_input.value = "value";
                            para.appendChild(acc_lift_input);
                            var element = document.getElementById("PlaceDetails");
                            element.appendChild(para);
                            var strong = document.createElement('strong');
                            strong.textContent = marker2.title;
                            infowincontent.appendChild(strong);
                            infowincontent.appendChild(document.createElement('br'));
                            var text = document.createElement('text');
                            text.textContent = marker2.address;
                            infowincontent.appendChild(text);
                            $.getJSON('https://joyaccess.herokuapp.com/places/placeAPI', function(jsonData) {
                                $.each(jsonData, function (key, data) {
                                    var place_name = data.place_name;
                                    var place_id = data.place_id;
                                    var address = data.address;
                                    var acc_toilet = data.acc_toilet;
                                    var acc_carpark = data.acc_carpark;
                                    var acc_lift = data.acc_lift;
                                    var lat = parseFloat(data.lat);
                                    var lng = parseFloat(data.lng);
                                    console.log("Data from MongoDB:" +
                                        "\nplace_name = " + place_name + "\nplace_id = " + place_id +
                                        "\naddress = " + address + "\nacc_toilet = " + acc_toilet +
                                        "\nacc_carpark = " + acc_carpark + "\nacc_lift = " + acc_lift + "\npoint lat = " +
                                        lat + "\npoint lng = " +
                                        lng + "\nMarker lat = " + marker2.position.lat() + "\nMarker lng = " +
                                        marker2.position.lng());
                                    // If this Google Map Places API marker corresponds to an existing location in our
                                    // database that has accessibility info, we display the accessibility info as well
                                    if ((lat == marker2.position.lat() && lng == marker2.position.lng()) &&
                                        ((acc_toilet == true) || (acc_carpark == true) ||
                                            (acc_lift == true))) {
                                        console.log("Matching location found! Accessibility info should be visible!");
                                        if (acc_toilet == true) {
                                            document.getElementById("acc_toilet_input").checked = true;
                                            var acctext_toilet = document.createElement('text');
                                            infowincontent.appendChild(document.createElement('br'));
                                            acctext_toilet.textContent = "Accessible Toilet. ";
                                            infowincontent.appendChild(acctext_toilet);
                                        }
                                        if (acc_carpark == true) {
                                            document.getElementById("acc_carpark_input").checked = true;
                                            var acctext_carpark = document.createElement('text');
                                            infowincontent.appendChild(document.createElement('br'));
                                            acctext_carpark.textContent = "Accessible Carpark. ";
                                            infowincontent.appendChild(acctext_carpark);
                                        }
                                        if (acc_lift == true) {
                                            document.getElementById("acc_lift_input").checked = true;
                                            var acctext_lift = document.createElement('text');
                                            infowincontent.appendChild(document.createElement('br'));
                                            acctext_lift.textContent = "Accessible lift";
                                            infowincontent.appendChild(acctext_lift);
                                        }
                                    }
                                });
                            });
                            infoWindow2.setContent(infowincontent);
                            infoWindow2.open(map, marker2);
                        }
                    }) (marker2, map, place));
                    markers2.push(marker2);
                    if (place.geometry.viewport) {
                        // Only geocodes have viewport.
                        bounds.union(place.geometry.viewport);
                    } else {
                        bounds.extend(place.geometry.location);
                    }
                });
                map.fitBounds(bounds);
            });
        }
    </script>
    <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBamM2AMAzA6-D3sgXjvdoGeLp3_yj0wg0&libraries=places&callback=initMap">
    </script>
</body>
</html>